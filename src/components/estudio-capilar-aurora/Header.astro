---
import Logo from "./header/Logo.astro";
import DesktopNav from "./header/DesktopNav.astro";
import MobileMenuBtn from "./header/MobileMenuBtn.astro";
import MobileMenuOverlay from "./header/MobileMenuOverlay.astro";

const links = [
  { label: "Servicios", href: "#servicios" },
  { label: "Nuestro Arte", href: "#portfolio" },
  { label: "Filosof√≠a", href: "#filosofia" },
  { label: "Contacto", href: "#contacto" },
];
---

<header
  id="aurora-header"
  data-scrolled="false"
  class="fixed top-0 left-0 w-full z-50 transition-all duration-300 border-b border-transparent group/header"
>
  <div
    class="absolute inset-0 bg-white/90 dark:bg-slate-950/60 backdrop-blur-md -z-10 transition-opacity duration-300 opacity-0 group-data-[scrolled=true]/header:opacity-100 shadow-sm"
    id="header-bg"
  >
  </div>

  <div class="container mx-auto px-6 h-20 flex items-center justify-between">
    <Logo />
    <DesktopNav links={links} />
    <MobileMenuBtn />
  </div>

  <MobileMenuOverlay links={links} />
</header>

<script>
  import { HeaderController } from "../../utils/ui/HeaderController.ts";

  new HeaderController({
    headerId: "aurora-header",
    toggleBtnId: "mobile-menu-btn",
    mobileMenuId: "mobile-menu",
    mobileLinksSelector: ".mobile-link",

    onOpen: ({ btn, links }) => {
      const spans = btn.querySelectorAll("span");
      spans.forEach((span) => span.classList.add("bg-gray-900"));

      setTimeout(() => {
        links.forEach((link) => {
          link.classList.remove("opacity-0", "translate-y-4");
        });
      }, 300);
    },

    onClose: ({ btn, links }) => {
      const spans = btn.querySelectorAll("span");
      spans.forEach((span) => span.classList.remove("bg-gray-900"));

      links.forEach((link) => {
        link.classList.add("opacity-0", "translate-y-4");
      });
    },
  });
</script>
