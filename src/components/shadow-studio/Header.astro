---
import MobileMenu from "./Header/MobileMenu.astro";

import LogoIcon from "./LogoIcon.astro";

const navLinks = [
  { label: "Servicios", href: "#services" },
  { label: "Artistas", href: "#artists-section" },
  { label: "Galería", href: "#gallery" },
  { label: "Contacto", href: "#contact" },
];
---

<header
  id="main-header"
  class="fixed top-0 left-0 right-0 z-50 p-4 md:p-6 font-sans transition-all duration-500 ease-in-out"
>
  <div class="mx-auto w-full max-w-screen-2xl">
    <div
      id="header-container"
      class="flex items-center justify-between px-6 py-4 border border-white/10 bg-zinc-950/60 backdrop-blur-md rounded-2xl shadow-2xl shadow-black/20 transition-all duration-500 hover:border-white/20 hover:bg-zinc-950/80"
    >
      <a href="/" class="flex items-center gap-3 group">
        <div
          class="w-8 h-8 text-white transition-transform duration-300 group-hover:scale-110 group-hover:rotate-12"
        >
          <LogoIcon class="w-full h-full text-primary" />
        </div>

        <div class="flex flex-col">
          <h2
            class="text-lg font-black tracking-[0.15em] text-white uppercase leading-none"
          >
            Shadow
          </h2>

          <span
            class="text-[0.6rem] font-medium tracking-[0.3em] text-zinc-400 uppercase leading-none group-hover:text-white transition-colors"
          >
            Studio
          </span>
        </div>
      </a>

      <nav class="hidden md:flex items-center gap-5 lg:gap-10">
        {
          navLinks.map((link) => (
            <a
              class="group relative overflow-hidden text-xs font-bold tracking-widest uppercase"
              href={link.href}
            >
              <span class="block text-zinc-300 transition-transform duration-500 ease-[cubic-bezier(0.19,1,0.22,1)] group-hover:-translate-y-full">
                {link.label}
              </span>

              <span class="absolute top-0 left-0 block w-full text-secondary transition-transform duration-500 ease-[cubic-bezier(0.19,1,0.22,1)] translate-y-full group-hover:translate-y-0">
                {link.label}
              </span>
            </a>
          ))
        }
      </nav>

      <div class="flex items-center gap-4">
        <button
          class="hidden md:flex relative items-center justify-center h-10 px-2 lg:px-6 overflow-hidden text-xs font-black tracking-[0.2em] uppercase transition-all duration-300 rounded-lg group cursor-pointer bg-primary text-white border border-primary hover:border-secondary hover:text-white active:scale-95"
        >
          <span
            class="absolute inset-0 w-full h-full bg-secondary translate-y-full transition-transform duration-300 ease-[cubic-bezier(0.19,1,0.22,1)] group-hover:translate-y-0"
          ></span>

          <span class="relative z-10">Reservar Cita</span>
        </button>

        <button
          class="flex md:hidden text-white p-2 hover:bg-white/10 rounded-lg transition-colors"
          id="open-menu-btn"
          aria-label="Abrir menú"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            fill="none"
            viewBox="0 0 24 24"
            stroke-width="1.5"
            stroke="currentColor"
            class="w-7 h-7"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              d="M3.75 9h16.5m-16.5 6.75h16.5"></path>
          </svg>
        </button>
      </div>
    </div>
  </div>

  <MobileMenu links={navLinks} />
</header>

<script>
  const openBtn = document.getElementById("open-menu-btn");

  const closeBtn = document.getElementById("close-menu-btn");

  const menuOverlay = document.getElementById("mobile-menu-overlay");

  const body = document.body;

  function openMenu() {
    menuOverlay?.setAttribute("data-open", "true");

    body.style.overflow = "hidden";
  }

  function closeMenu() {
    menuOverlay?.setAttribute("data-open", "false");

    body.style.overflow = "";
  }

  openBtn?.addEventListener("click", openMenu);

  closeBtn?.addEventListener("click", closeMenu);

  window.addEventListener("close-mobile-menu", closeMenu);

  const header = document.getElementById("main-header");

  const headerContainer = document.getElementById("header-container");

  function handleScroll() {
    if (!header || !headerContainer) return;

    if (window.scrollY > 50) {
      header.classList.remove("md:p-6", "p-4");

      header.classList.add("py-2", "px-4");

      headerContainer.classList.remove("bg-zinc-950/60");

      headerContainer.classList.add(
        "bg-zinc-950/90",
        "shadow-black/50",
        "border-white/5"
      );
    } else {
      header.classList.add("md:p-6", "p-4");

      header.classList.remove("py-2", "px-4");

      headerContainer.classList.add("bg-zinc-950/60");

      headerContainer.classList.remove(
        "bg-zinc-950/90",
        "shadow-black/50",
        "border-white/5"
      );
    }
  }

  window.addEventListener("scroll", handleScroll);

  handleScroll();
</script>
